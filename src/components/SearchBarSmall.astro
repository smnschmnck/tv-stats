---
import { Search } from "@lucide/astro";
import { getLocaleLink } from "../i18n/utils";

const { t } = Astro.locals;

const query = Astro.url.searchParams.get("q");

const searchUrl = getLocaleLink(Astro.currentLocale, "/search");
---

<form
  action={searchUrl}
  class="flex h-11 w-full items-center justify-between rounded-full border border-zinc-200 bg-white px-1.5 ring-blue-500 focus-within:ring-2"
>
  <div class="flex h-full w-full items-center gap-2 px-3">
    <input
      name="q"
      autocomplete="off"
      class="h-full w-full font-medium outline-none placeholder:text-zinc-500"
      placeholder={t("components.searchBarSmall.placeholder")}
      value={query}
    />
  </div>
  <button
    type="submit"
    class="flex max-h-8 min-h-8 max-w-8 min-w-8 items-center justify-center rounded-full bg-black font-medium text-white transition hover:bg-zinc-700"
  >
    <Search size={16} stroke-width={2} />
  </button>
</form>
