---
import { fallbackLanguage, languageCookieKey } from "../constants/i18n";

const preferredLanguage = Astro.cookies.get(languageCookieKey)?.value;

if (preferredLanguage) {
  return Astro.redirect(`/${preferredLanguage}`);
}

const browserLocale = Astro.preferredLocale;

if (browserLocale) {
  return Astro.redirect(`/${browserLocale}`);
}

return Astro.redirect(`/${fallbackLanguage}`);
---
