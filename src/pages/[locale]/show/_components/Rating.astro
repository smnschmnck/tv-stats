---
import { BaseRating } from "./BaseRating";

interface Props {
  rating: number | undefined;
  tconst?: string;
  seasonNumber?: number | null;
  episodeNumber?: number | null;
}

const { rating, episodeNumber, seasonNumber, tconst } = Astro.props;

const { showId } = Astro.params;

const getClassName = () => {
  if (!rating) {
    return "bg-zinc-200";
  }

  if (rating >= 9) {
    return "bg-green-700";
  } else if (rating >= 8) {
    return "bg-green-400";
  } else if (rating >= 7) {
    return "bg-yellow-400";
  } else if (rating >= 6) {
    return "bg-red-400";
  } else if (rating >= 5) {
    return "bg-red-600";
  } else if (rating >= 4) {
    return "bg-pink-600";
  } else if (rating >= 3) {
    return "bg-fuchsia-600";
  } else if (rating >= 2) {
    return "bg-violet-500";
  } else if (rating >= 1) {
    return "bg-blue-500";
  }
  return "bg-blue-600";
};

const className = getClassName();
---

<BaseRating
  client:load
  seasonNumber={seasonNumber}
  episodeNumber={episodeNumber}
  tconst={tconst}
  rating={rating}
  tvShowId={showId}
  className={className}
/>
